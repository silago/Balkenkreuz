[gd_scene load_steps=12 format=2]

[ext_resource path="res://Assets/Sprites/planet400.png" type="Texture" id=1]
[ext_resource path="res://Scripts/DestroyablePlanet.gd" type="Script" id=2]
[ext_resource path="res://Assets/Sprites/flak_platform.png" type="Texture" id=4]
[ext_resource path="res://Assets/Sprites/flak_muzzle.png" type="Texture" id=5]
[ext_resource path="res://Scripts/flak.gd" type="Script" id=6]
[ext_resource path="res://Assets/Sprites/fog_sky.jpg" type="Texture" id=7]

[sub_resource type="ParticlesMaterial" id=1]
emission_shape = 1
emission_sphere_radius = 30.0
flag_disable_z = true
flatness = 1.0
gravity = Vector3( 0, 0, 0 )
initial_velocity = 20.0
initial_velocity_random = 1.0
angular_velocity = 0.000168972
orbit_velocity = 0.0
orbit_velocity_random = 0.0
linear_accel = -0.05
linear_accel_random = 1.0
angle = 70.0
angle_random = 1.0
scale = 5.0
scale_random = 1.0
color = Color( 0.74902, 0.372549, 0.372549, 1 )

[sub_resource type="OccluderPolygon2D" id=6]
polygon = PoolVector2Array( 0.837708, -194.492, 83.1459, -179.916, 139.733, -136.19, 178.315, -79.6032, 198.034, -8.44095, 186.888, 54.1476, 155.165, 121.023, 108.867, 159.605, 53.1376, 185.326, 2.55237, 192.185, -54.8919, 187.898, -120.053, 157.033, -168.923, 97.8738, -192.93, 37.8574, -196.359, -23.0164, -179.212, -84.7475, -136.343, -145.621, -77.1837, -183.346, -36.0296, -190.205 )

[sub_resource type="CircleShape2D" id=7]
radius = 996.465

[sub_resource type="ParticlesMaterial" id=8]
emission_shape = 1
emission_sphere_radius = 180.0
flag_disable_z = true
spread = 0.0
flatness = 1.0
gravity = Vector3( 0, 0, 0 )
initial_velocity_random = 1.0
angular_velocity = 10.0
angular_velocity_random = 1.0
orbit_velocity = 0.0
orbit_velocity_random = 1.0
linear_accel = 1.0
radial_accel = 0.5
radial_accel_random = 0.5
damping = 0.46
scale = 5.0
scale_random = 1.0
color = Color( 0.74902, 0.372549, 0.372549, 1 )

[sub_resource type="GDScript" id=5]
script/source = "extends Polygon2D

#onready var path : Path2D = get_parent()
# Declare member variables here. Examples:
# var a = 2
# var b = \"text\"
# Called when the node enters the scene tree for the first time.


func _ready():
	return
	var radius = 200
	var centerX = 0
	var centerY = 0
	var degree = 0
	var points = []
	polygon.resize(0)# = PoolVector2Array()
	
	while degree<360:
		degree+=60
		var radians = degree * PI/180
		var x = centerX + radius * cos(radians)
		var y = centerY + radius * sin(radians)
		polygon.append(Vector2(x,y))
	
# Called every frame. 'delta' is the elapsed time since the previous frame.
#func _process(delta):
#	pass

func _draw():
	return
	var p = get_polygon()
	if (len(p)==0):
		return
	p.append(p[0])
	#p = path.curve.get_baked_points()
	var color = Color(\"242424\");
	draw_polyline(p,color,5,true)
"

[node name="DestroyPlanet" type="Node2D"]
z_index = 2

[node name="Sprite2" type="Sprite" parent="."]
visible = false
modulate = Color( 0.584314, 0.584314, 0.584314, 1 )
z_index = -4
texture = ExtResource( 7 )

[node name="Sprite" type="Sprite" parent="."]
visible = false
z_index = -3
z_as_relative = false
texture = ExtResource( 1 )

[node name="ParticleTemplate" type="Particles2D" parent="."]
position = Vector2( -142.324, -289.793 )
emitting = false
amount = 3
lifetime = 15.0
one_shot = true
explosiveness = 1.0
randomness = 0.29
process_material = SubResource( 1 )

[node name="StaticBody2D" type="StaticBody2D" parent="." groups=[
"earth",
]]
collision_layer = 3
collision_mask = 3
script = ExtResource( 2 )
protectedDistance = 1

[node name="Image" type="Polygon2D" parent="StaticBody2D"]
texture = ExtResource( 1 )
texture_offset = Vector2( 200, 200 )
polygon = PoolVector2Array( -196.617, -13.6163, -193.135, -42.3518, -181.556, -83.2193, -154.153, -125.311, -115.146, -162.911, -86.5388, -179.258, -54.1854, -189.815, -5.14446, -196.626, 45.7413, -190.872, 87.4884, -177.555, 122.566, -155.078, 148.79, -129.536, 167.18, -102.291, 186.754, -63.0588, 195.994, -25.5849, 197.627, 8.12521, 187.232, 65.0836, 175.27, 93.5628, 156.474, 120.903, 136.057, 144.654, 99.2014, 168.447, 65.9146, 183.338, 25.0427, 193.525, -0.446201, 195.661, -27.6216, 194.339, -83.4738, 180.035, -121.957, 154.834, -156.354, 121.118, -176.107, 89.4457, -192.454, 51.3028, -197.903, 21.6739 )

[node name="Poly" type="CollisionPolygon2D" parent="StaticBody2D"]
polygon = PoolVector2Array( -195.463, 0.76062, -191.944, -45.8297, -180.821, -74.8263, -170.979, -96.1396, -150.192, -123.11, -128.285, -146.747, -107.674, -163.493, -87.0232, -176, -56.8349, -186.725, 0.714539, -194.167, 0.634888, -0.477417 )
one_way_collision_margin = 10.0

[node name="Occluder" type="LightOccluder2D" parent="StaticBody2D"]
occluder = SubResource( 6 )

[node name="Attractor" type="Area2D" parent="."]
visible = false
space_override = 3
gravity_point = true
gravity = 250.0
linear_damp = 1.0
collision_layer = 3
collision_mask = 3

[node name="CollisionShape2D" type="CollisionShape2D" parent="Attractor"]
position = Vector2( -11, 0 )
shape = SubResource( 7 )

[node name="Path" type="Path2D" parent="."]
visible = false
curve = null

[node name="PathFollow" type="PathFollow2D" parent="Path"]
position = Vector2( -200, 0 )
rotation = -1.44644

[node name="Particles2D" type="Particles2D" parent="Path"]
visible = false
amount = 200
lifetime = 60.0
preprocess = 600.0
fract_delta = false
process_material = SubResource( 8 )

[node name="Image" type="Polygon2D" parent="Path"]
visible = false
texture = ExtResource( 1 )
texture_offset = Vector2( 200, 200 )
polygon = PoolVector2Array( -196.617, -13.6163, -193.135, -42.3518, -181.556, -83.2193, -154.153, -125.311, -115.146, -162.911, -86.5388, -179.258, -54.1854, -189.815, -5.14446, -196.626, 45.7413, -190.872, 87.4884, -177.555, 122.566, -155.078, 148.79, -129.536, 167.18, -102.291, 186.754, -63.0588, 195.994, -25.5849, 197.627, 8.12521, 187.232, 65.0836, 175.27, 93.5628, 156.474, 120.903, 136.057, 144.654, 99.2014, 168.447, 65.9146, 183.338, 25.0427, 193.525, -0.446201, 195.661, -27.6216, 194.339, -83.4738, 180.035, -121.957, 154.834, -156.354, 121.118, -176.107, 89.4457, -192.454, 51.3028, -197.903, 21.6739 )
script = SubResource( 5 )

[node name="flak" type="Node2D" parent="."]
position = Vector2( 7.8918, -195.796 )
scale = Vector2( 0.2, 0.15 )
script = ExtResource( 6 )

[node name="platform" type="Sprite" parent="flak"]
position = Vector2( -4.18121, -1.4961 )
texture = ExtResource( 4 )

[node name="muzzle" type="Sprite" parent="flak"]
position = Vector2( -8.81757, -13.5137 )
rotation = 0.00561381
texture = ExtResource( 5 )
offset = Vector2( 0.472116, -56.3929 )
